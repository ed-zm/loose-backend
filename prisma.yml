endpoint: http://${env:PRISMA_HOST}:${env:PRISMA_PORT}/${env:PRISMA_SERVICE}/${env:STAGE}
secret: ${env:PRISMA_SECRET}
datamodel:
  - datamodel/models/Comment.graphql
  - datamodel/models/Issue.graphql
  - datamodel/models/Label.graphql
  - datamodel/models/Organization.graphql
  - datamodel/models/ResponseRequest.graphql
  - datamodel/models/Repository.graphql
  - datamodel/models/Role.graphql
  - datamodel/models/Task.graphql
  - datamodel/models/Team.graphql
  - datamodel/models/User.graphql

hooks:
  post-deploy:
    - prisma generate
    - nexus-prisma-generate --output ./generated/nexus-prisma --client ./generated/prisma-client

generate:
  - generator: typescript-client
    output: ./generated/prisma-client
  - generator: graphql-schema
    output: ./generated/prisma-client/prisma.graphql
