# Migration `20200910044912-init`

This migration has been generated by Eduardo Zarraga at 9/10/2020, 12:49:12 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "loose$dev"."Task" (
"id" text   NOT NULL ,
"code" text   ,
"title" text   NOT NULL ,
"description" text   ,
"estimated" integer   NOT NULL DEFAULT 0,
"state" integer   DEFAULT 0,
"organizationId" text   ,
"createdAt" timestamp(3)   NOT NULL DEFAULT CURRENT_TIMESTAMP,
"updatedAt" timestamp(3)   NOT NULL ,
PRIMARY KEY ("id")
)

CREATE UNIQUE INDEX "Task.code_unique" ON "loose$dev"."Task"("code")

ALTER TABLE "loose$dev"."Task" ADD FOREIGN KEY ("organizationId")REFERENCES "loose$dev"."Organization"("id") ON DELETE SET NULL ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200910044431-init..20200910044912-init
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 model Organization {
   id String @default(cuid()) @id
@@ -14,12 +14,29 @@
   githubOrganization String?
   owner User @relation("UserOrganizations", fields: [ownerId], references: [id])
   ownerId String
   users User[] @relation("OrganizationUsers")
+  tasks Task[] @relation("OrganizationTasks")
   createdAt DateTime @default(now())
   updatedAt DateTime @updatedAt
 }
+model Task {
+  id String @default(cuid()) @id
+  code String? @unique
+  title String
+  description String?
+  estimated Int @default(0)
+  state Int? @default(value: 0)
+  // createdBy User @relation("TasksCreatedBy")
+  // assignedTo User? @relation("TasksAssignedTo")
+  organization Organization? @relation("OrganizationTasks", fields: [organizationId], references: [id])
+  organizationId String?
+  createdAt DateTime @default(now())
+  updatedAt DateTime @updatedAt
+}
+
+
 model User {
   id String @default(cuid()) @id
   username String @unique
   firstName String
```


