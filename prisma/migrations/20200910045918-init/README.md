# Migration `20200910045918-init`

This migration has been generated by Eduardo Zarraga at 9/10/2020, 12:59:18 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "loose$dev"."Comment" (
"id" text   NOT NULL ,
"text" text   NOT NULL ,
"userId" text   NOT NULL ,
"taskId" text   NOT NULL ,
"createdAt" timestamp(3)   NOT NULL DEFAULT CURRENT_TIMESTAMP,
"updatedAt" timestamp(3)   NOT NULL ,
PRIMARY KEY ("id")
)

ALTER TABLE "loose$dev"."Comment" ADD FOREIGN KEY ("userId")REFERENCES "loose$dev"."User"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "loose$dev"."Comment" ADD FOREIGN KEY ("taskId")REFERENCES "loose$dev"."Task"("id") ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200910045434-init..20200910045918-init
--- datamodel.dml
+++ datamodel.dml
@@ -3,11 +3,22 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
+model Comment {
+  id String @default(cuid()) @id
+  text String
+  user User @relation("UserComments", fields: [userId], references: [id])
+  userId String
+  task Task @relation("TaskComments", fields: [taskId], references: [id])
+  taskId String
+  createdAt DateTime @default(now())
+  updatedAt DateTime @updatedAt
+}
+
 model Organization {
   id String @default(cuid()) @id
   name String
   githubToken String?
@@ -32,8 +43,9 @@
   assignedTo User? @relation("TasksAssignedTo", fields: [assignedToId], references: [id])
   assignedToId String?
   organization Organization? @relation("OrganizationTasks", fields: [organizationId], references: [id])
   organizationId String?
+  comments Comment[] @relation("TaskComments")
   createdAt DateTime @default(now())
   updatedAt DateTime @updatedAt
 }
```


